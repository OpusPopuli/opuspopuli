# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type UserProfileEntity {
  id: ID!
  firstName: String
  middleName: String
  lastName: String
  displayName: String
  preferredName: String
  dateOfBirth: DateTime
  phone: String
  phoneVerifiedAt: DateTime
  timezone: String!
  locale: String!
  preferredLanguage: String!
  avatarUrl: String
  bio: String
  isPublic: Boolean!
  avatarStorageKey: String
  politicalAffiliation: PoliticalAffiliation
  votingFrequency: VotingFrequency
  policyPriorities: [String!]
  occupation: String
  educationLevel: EducationLevel
  incomeRange: IncomeRange
  householdSize: String
  homeownerStatus: HomeownerStatus
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""Political party affiliation"""
enum PoliticalAffiliation {
  DEMOCRAT
  REPUBLICAN
  INDEPENDENT
  LIBERTARIAN
  GREEN
  OTHER
  PREFER_NOT_TO_SAY
}

"""How often the user votes"""
enum VotingFrequency {
  EVERY_ELECTION
  MOST_ELECTIONS
  SOME_ELECTIONS
  RARELY
  NEVER
  PREFER_NOT_TO_SAY
}

"""Highest education level completed"""
enum EducationLevel {
  HIGH_SCHOOL
  SOME_COLLEGE
  ASSOCIATE
  BACHELOR
  MASTER
  DOCTORATE
  TRADE_SCHOOL
  PREFER_NOT_TO_SAY
}

"""Annual household income range"""
enum IncomeRange {
  UNDER_25K
  RANGE_25K_50K
  RANGE_50K_75K
  RANGE_75K_100K
  RANGE_100K_150K
  RANGE_150K_200K
  OVER_200K
  PREFER_NOT_TO_SAY
}

"""Home ownership status"""
enum HomeownerStatus {
  OWN
  RENT
  LIVING_WITH_FAMILY
  OTHER
  PREFER_NOT_TO_SAY
}

type UserAddressEntity {
  id: ID!
  addressType: AddressType!
  isPrimary: Boolean!
  label: String
  addressLine1: String!
  addressLine2: String
  city: String!
  state: String!
  postalCode: String!
  country: String!
  latitude: Float
  longitude: Float
  formattedAddress: String
  placeId: String
  congressionalDistrict: String
  stateSenatorialDistrict: String
  stateAssemblyDistrict: String
  county: String
  municipality: String
  schoolDistrict: String
  precinctId: String
  pollingPlace: String
  isVerified: Boolean!
  verificationMethod: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""The type of address"""
enum AddressType {
  RESIDENTIAL
  MAILING
  BUSINESS
  VOTING
}

type UserConsentEntity {
  id: ID!
  consentType: ConsentType!
  status: ConsentStatus!
  documentVersion: String
  documentUrl: String
  userAgent: String
  collectionMethod: String
  collectionContext: String
  grantedAt: DateTime
  deniedAt: DateTime
  withdrawnAt: DateTime
  expiresAt: DateTime
  consentText: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""Type of consent"""
enum ConsentType {
  TERMS_OF_SERVICE
  PRIVACY_POLICY
  MARKETING_EMAIL
  MARKETING_SMS
  MARKETING_PUSH
  DATA_SHARING
  ANALYTICS
  PERSONALIZATION
  LOCATION_TRACKING
  VOTER_DATA_COLLECTION
  CIVIC_NOTIFICATIONS
  REPRESENTATIVE_CONTACT
}

"""Status of consent"""
enum ConsentStatus {
  GRANTED
  DENIED
  WITHDRAWN
  PENDING
}

type Auth {
  accessToken: String!
  idToken: String!
  refreshToken: String!
}

type PasskeyRegistrationOptions {
  options: JSON!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type PasskeyAuthenticationOptions {
  options: JSON!
  identifier: String!
}

type PasskeyCredential {
  id: String!
  friendlyName: String
  deviceType: String
  createdAt: DateTime!
  lastUsedAt: DateTime!
}

type User {
  id: ID!
  email: String!
  firstName: String
  lastName: String
  created: DateTime
  updated: DateTime
}

type EmailCorrespondenceModel {
  id: ID!
  emailType: EmailType!
  status: EmailStatus!
  recipientEmail: String!
  recipientName: String
  subject: String!
  bodyPreview: String
  representativeId: String
  representativeName: String
  propositionId: String
  propositionTitle: String
  errorMessage: String
  sentAt: DateTime
  createdAt: DateTime!
}

"""Type of email sent"""
enum EmailType {
  WELCOME
  REPRESENTATIVE_CONTACT
  CIVIC_UPDATE
  ELECTION_REMINDER
  BALLOT_UPDATE
  ACCOUNT_ACTIVITY
}

"""Status of the email"""
enum EmailStatus {
  PENDING
  SENT
  DELIVERED
  FAILED
  BOUNCED
}

type PaginatedEmailCorrespondence {
  items: [EmailCorrespondenceModel!]!
  total: Int!
  hasMore: Boolean!
}

type SendEmailResult {
  success: Boolean!
  correspondenceId: String
  error: String
}

type NotificationPreferenceEntity {
  id: ID!
  emailEnabled: Boolean!
  emailProductUpdates: Boolean!
  emailSecurityAlerts: Boolean!
  emailMarketing: Boolean!
  emailFrequency: NotificationFrequency!
  pushEnabled: Boolean!
  pushProductUpdates: Boolean!
  pushSecurityAlerts: Boolean!
  pushMarketing: Boolean!
  smsEnabled: Boolean!
  smsSecurityAlerts: Boolean!
  smsMarketing: Boolean!
  civicElectionReminders: Boolean!
  civicVoterDeadlines: Boolean!
  civicBallotUpdates: Boolean!
  civicLocalNews: Boolean!
  civicRepresentativeUpdates: Boolean!
  civicFrequency: NotificationFrequency!
  quietHoursEnabled: Boolean!
  quietHoursStart: String
  quietHoursEnd: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""How often to receive notifications"""
enum NotificationFrequency {
  IMMEDIATE
  DAILY_DIGEST
  WEEKLY_DIGEST
  NEVER
}

type CoreFieldsStatus {
  hasName: Boolean!
  hasPhoto: Boolean!
  hasTimezone: Boolean!
  hasAddress: Boolean!
}

type ProfileCompletionResult {
  percentage: Int!
  isComplete: Boolean!
  coreFieldsComplete: CoreFieldsStatus!
  suggestedNextSteps: [String!]!
}

type ActivityLogEntry {
  id: ID!
  action: AuditAction!
  entityType: String
  entityId: String
  operationName: String
  operationType: String
  success: Boolean!
  errorMessage: String
  ipAddress: String
  userAgent: String
  deviceType: String
  browser: String
  timestamp: DateTime!
}

"""Types of audit actions"""
enum AuditAction {
  LOGIN
  LOGOUT
  LOGIN_FAILED
  ACCOUNT_LOCKED
  ACCOUNT_UNLOCKED
  PASSWORD_CHANGE
  PASSWORD_CHANGE_FAILED
  PASSWORD_RESET_REQUEST
  PASSWORD_RESET
  PASSWORD_RESET_FAILED
  REGISTRATION
  REGISTRATION_FAILED
  USER_CONFIRMED
  PASSKEY_REGISTRATION
  PASSKEY_REGISTRATION_FAILED
  PASSKEY_AUTHENTICATION
  PASSKEY_AUTHENTICATION_FAILED
  PASSKEY_DELETED
  MAGIC_LINK_SENT
  MAGIC_LINK_VERIFIED
  MAGIC_LINK_FAILED
  AUTHORIZATION_DENIED
  PERMISSION_GRANTED
  PERMISSION_REVOKED
  ROLE_ASSIGNED
  ROLE_REMOVED
  SUSPICIOUS_ACTIVITY
  RATE_LIMIT_EXCEEDED
  TOKEN_REFRESH
  SESSION_EXPIRED
  CREATE
  READ
  UPDATE
  DELETE
  BULK_READ
  BULK_UPDATE
  BULK_DELETE
  UPLOAD
  DOWNLOAD
  SEARCH
  EXPORT
}

type ActivityLogPage {
  items: [ActivityLogEntry!]!
  total: Int!
  hasMore: Boolean!
}

type SessionInfo {
  id: ID!
  deviceType: String
  deviceName: String
  browser: String
  operatingSystem: String
  city: String
  region: String
  country: String
  isActive: Boolean!
  isCurrent: Boolean!
  lastActivityAt: DateTime
  createdAt: DateTime!
  expiresAt: DateTime!
  revokedAt: DateTime
}

type SessionsPage {
  items: [SessionInfo!]!
  total: Int!
}

type ActivitySummary {
  totalActions: Int!
  successfulActions: Int!
  failedActions: Int!
  activeSessions: Int!
  lastLoginAt: DateTime
  lastActivityAt: DateTime
}

type Query {
  getUsers: [User!]!
  getUser(id: ID!): User!
  findUser(email: String!): User!
  myPasskeys: [PasskeyCredential!]!
  myEmailHistory(skip: Int! = 0, take: Int! = 10, emailType: EmailType): PaginatedEmailCorrespondence!
  myEmail(id: ID!): EmailCorrespondenceModel
  representativeMailtoLink(representativeEmail: String!, subject: String!, body: String!): String!
  myProfile: UserProfileEntity
  myProfileCompletion: ProfileCompletionResult!
  avatarUploadUrl(filename: String!): String!
  myAddresses: [UserAddressEntity!]!
  myAddress(id: ID!): UserAddressEntity
  myNotificationPreferences: NotificationPreferenceEntity
  myConsents: [UserConsentEntity!]!
  myConsent(consentType: ConsentType!): UserConsentEntity
  hasValidConsent(consentType: ConsentType!): Boolean!
  myActivityLog(limit: Int! = 20, offset: Int! = 0, filters: ActivityLogFilters): ActivityLogPage!
  myActivitySummary: ActivitySummary!
  mySessions(includeRevoked: Boolean! = false): SessionsPage!
  mySession(id: ID!): SessionInfo
}

input ActivityLogFilters {
  actions: [AuditAction!]
  entityType: String
  startDate: DateTime
  endDate: DateTime
  successOnly: Boolean
}

type Mutation {
  createUser(createUserDto: CreateUserDto!): User!
  updateUser(id: ID!, updateUserDto: UpdateUserDto!): Boolean!
  deleteUser(id: ID!): Boolean!
  registerUser(registerUserDto: RegisterUserDto!): Boolean!
  loginUser(loginUserDto: LoginUserDto!): Auth!
  changePassword(changePasswordDto: ChangePasswordDto!): Boolean!
  forgotPassword(email: String!): Boolean!
  confirmForgotPassword(confirmForgotPasswordDto: ConfirmForgotPasswordDto!): Boolean!
  confirmUser(id: ID!): Boolean!
  addAdminPermission(id: ID!): Boolean!
  removeAdminPermission(id: ID!): Boolean!
  generatePasskeyRegistrationOptions(input: GeneratePasskeyRegistrationOptionsDto!): PasskeyRegistrationOptions!
  verifyPasskeyRegistration(input: VerifyPasskeyRegistrationDto!): Boolean!
  generatePasskeyAuthenticationOptions(input: GeneratePasskeyAuthenticationOptionsDto): PasskeyAuthenticationOptions!
  verifyPasskeyAuthentication(input: VerifyPasskeyAuthenticationDto!): Auth!
  deletePasskey(credentialId: String!): Boolean!
  sendMagicLink(input: SendMagicLinkDto!): Boolean!
  verifyMagicLink(input: VerifyMagicLinkDto!): Auth!
  registerWithMagicLink(input: RegisterWithMagicLinkDto!): Boolean!
  logout: Boolean!
  contactRepresentative(input: ContactRepresentativeDto!, representative: RepresentativeInfoDto!, proposition: PropositionInfoDto): SendEmailResult!
  updateMyProfile(input: UpdateProfileDto!): UserProfileEntity!
  updateAvatarStorageKey(storageKey: String!): UserProfileEntity!
  createAddress(input: CreateAddressDto!): UserAddressEntity!
  updateAddress(input: UpdateAddressDto!): UserAddressEntity!
  deleteAddress(id: ID!): Boolean!
  setPrimaryAddress(id: ID!): UserAddressEntity!
  updateNotificationPreferences(input: UpdateNotificationPreferencesDto!): NotificationPreferenceEntity!
  unsubscribeFromAll: NotificationPreferenceEntity!
  updateConsent(input: UpdateConsentDto!): UserConsentEntity!
  bulkUpdateConsents(input: BulkUpdateConsentsDto!): [UserConsentEntity!]!
  withdrawConsent(input: WithdrawConsentDto!): UserConsentEntity!
  revokeSession(id: ID!): Boolean!

  """Revoke all sessions except current"""
  revokeAllOtherSessions: Int!
}

input CreateUserDto {
  email: String!
  username: String!
  password: String!
  firstName: String
  lastName: String
  department: String
  clearance: String
}

input UpdateUserDto {
  email: String
  username: String
  firstName: String
  lastName: String
  department: String
  clearance: String
}

input RegisterUserDto {
  email: String!
  username: String!
  password: String!
  department: String
  clearance: String
  admin: Boolean = false
  confirm: Boolean = false
}

input LoginUserDto {
  email: String!
  password: String!
}

input ChangePasswordDto {
  accessToken: String!
  newPassword: String!
  currentPassword: String!
}

input ConfirmForgotPasswordDto {
  email: String!
  confirmationCode: String!
  password: String!
}

input GeneratePasskeyRegistrationOptionsDto {
  email: String!
}

input VerifyPasskeyRegistrationDto {
  email: String!
  response: JSON!
  friendlyName: String
}

input GeneratePasskeyAuthenticationOptionsDto {
  email: String
}

input VerifyPasskeyAuthenticationDto {
  identifier: String!
  response: JSON!
}

input SendMagicLinkDto {
  email: String!
  redirectTo: String
}

input VerifyMagicLinkDto {
  email: String!
  token: String!
}

input RegisterWithMagicLinkDto {
  email: String!
  redirectTo: String
}

input ContactRepresentativeDto {
  representativeId: ID!
  subject: String!
  message: String!
  propositionId: ID
  includeAddress: Boolean
}

input RepresentativeInfoDto {
  id: ID!
  name: String!
  email: String!
  chamber: String
}

input PropositionInfoDto {
  id: ID!
  title: String!
}

input UpdateProfileDto {
  firstName: String
  middleName: String
  lastName: String
  displayName: String
  preferredName: String
  dateOfBirth: String
  phone: String
  timezone: String
  locale: String
  preferredLanguage: String
  avatarUrl: String
  bio: String
  isPublic: Boolean
  avatarStorageKey: String
  politicalAffiliation: PoliticalAffiliation
  votingFrequency: VotingFrequency
  policyPriorities: [String!]
  occupation: String
  educationLevel: EducationLevel
  incomeRange: IncomeRange
  householdSize: String
  homeownerStatus: HomeownerStatus
}

input CreateAddressDto {
  addressType: String!
  isPrimary: Boolean = false
  label: String
  addressLine1: String!
  addressLine2: String
  city: String!
  state: String!
  postalCode: String!
  country: String = "US"
}

input UpdateAddressDto {
  id: ID!
  addressType: String
  isPrimary: Boolean
  label: String
  addressLine1: String
  addressLine2: String
  city: String
  state: String
  postalCode: String
  country: String
}

input UpdateNotificationPreferencesDto {
  emailEnabled: Boolean
  emailProductUpdates: Boolean
  emailSecurityAlerts: Boolean
  emailMarketing: Boolean
  emailFrequency: NotificationFrequency
  pushEnabled: Boolean
  pushProductUpdates: Boolean
  pushSecurityAlerts: Boolean
  pushMarketing: Boolean
  smsEnabled: Boolean
  smsSecurityAlerts: Boolean
  smsMarketing: Boolean
  civicElectionReminders: Boolean
  civicVoterDeadlines: Boolean
  civicBallotUpdates: Boolean
  civicLocalNews: Boolean
  civicRepresentativeUpdates: Boolean
  civicFrequency: NotificationFrequency
  quietHoursEnabled: Boolean
  quietHoursStart: String
  quietHoursEnd: String
}

input UpdateConsentDto {
  consentType: ConsentType!
  granted: Boolean!
  documentVersion: String
  documentUrl: String
}

input BulkUpdateConsentsDto {
  consents: [UpdateConsentDto!]!
}

input WithdrawConsentDto {
  consentType: ConsentType!
}