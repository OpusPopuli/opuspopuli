# SonarCloud Configuration
sonar.projectKey=OpusPopuli_opuspopuli
sonar.organization=opuspopuli

# Project metadata
sonar.projectName=opuspopuli
sonar.projectVersion=1.0.0

# Source code locations (directories only, no wildcards)
sonar.sources=apps/frontend/app,apps/frontend/lib,apps/backend/src,packages

# Test directories (directories only, no wildcards)
sonar.tests=apps/frontend/__tests__,apps/backend/src,packages/auth-provider/__tests__,packages/common/__tests__,packages/embeddings-provider/__tests__,packages/extraction-provider/__tests__,packages/llm-provider/__tests__,packages/logging-provider/__tests__,packages/prompt-client/__tests__,packages/region-provider/__tests__,packages/relationaldb-provider/__tests__,packages/scraping-pipeline/__tests__,packages/secrets-provider/__tests__,packages/storage-provider/__tests__,packages/vectordb-provider/__tests__,packages/email-provider/__tests__

# Exclusions from source analysis
# - Migrations are auto-generated Prisma/database scripts (never hand-edit)
# - Seed files are one-off scripts, not application code
sonar.exclusions=**/node_modules/**,**/dist/**,**/*.spec.ts,**/*.test.ts,**/*.test.tsx,**/coverage/**,**/__tests__/**,**/db/migrations/**,**/prisma/migrations/**,**/prisma/seeds/**

# Test file patterns
sonar.test.inclusions=**/*.spec.ts,**/*.test.ts,**/*.test.tsx

# Security hotspot exclusions (test fixtures with fake credentials)
sonar.security.exclusions=**/*.spec.ts,**/*.test.ts,**/*.test.tsx,**/__tests__/**,**/data.spec.ts

# Coverage exclusions (align with Jest coveragePathIgnorePatterns)
# - Migrations and entities are declarative database definitions
# - Config files are pure configuration without logic
# - Layout files are UI wrappers without business logic
# - DTOs are type definitions
# - NestJS modules are dependency injection configuration
# - Type-only files have no runtime code
sonar.coverage.exclusions=**/db/migrations/**,**/prisma/migrations/**,**/prisma/seeds/**,**/prisma/seed-*.ts,**/db/entities/**,**/main.ts,**/bootstrap.ts,**/config/index.ts,**/config/*.config.ts,**/*.dto.ts,**/jest.config.js,**/jest.config.ts,**/jest.config.base.js,**/playwright.config.ts,**/eslint.config.mjs,**/next.config.ts,**/next.config.mjs,**/layout.tsx,**/shared-app.config.ts,**/app.module.ts,**/lib/i18n/**,**/*.module.ts,**/providers/email/types.ts

# Coverage reports (lcov format)
# Include coverage from apps and all packages
# Note: Artifacts are uploaded from apps/*/coverage/ and packages/*/coverage/
# and downloaded to coverage-reports/, preserving directory structure
sonar.javascript.lcov.reportPaths=coverage-reports/apps/frontend/coverage/lcov.info,coverage-reports/apps/backend/coverage/lcov.info,coverage-reports/packages/auth-provider/coverage/lcov.info,coverage-reports/packages/common/coverage/lcov.info,coverage-reports/packages/embeddings-provider/coverage/lcov.info,coverage-reports/packages/extraction-provider/coverage/lcov.info,coverage-reports/packages/llm-provider/coverage/lcov.info,coverage-reports/packages/logging-provider/coverage/lcov.info,coverage-reports/packages/prompt-client/coverage/lcov.info,coverage-reports/packages/region-provider/coverage/lcov.info,coverage-reports/packages/relationaldb-provider/coverage/lcov.info,coverage-reports/packages/scraping-pipeline/coverage/lcov.info,coverage-reports/packages/secrets-provider/coverage/lcov.info,coverage-reports/packages/storage-provider/coverage/lcov.info,coverage-reports/packages/vectordb-provider/coverage/lcov.info,coverage-reports/packages/email-provider/coverage/lcov.info

# TypeScript configuration
sonar.typescript.tsconfigPaths=apps/frontend/tsconfig.json,apps/backend/tsconfig.json

# Duplication exclusions (seed data files have repetitive structure by design)
sonar.cpd.exclusions=**/prisma/seed-*.ts

# Encoding
sonar.sourceEncoding=UTF-8
